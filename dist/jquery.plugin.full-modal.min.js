"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}();!function(t,n){function i(){return""+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"full-modal-")+Date.now()}function e(t){return"string"==typeof t}function o(t,n){var i={};return["webkit","moz","ms","o"].forEach(function(e){i["-"+e+"-"+t]=n}),i}if(!n)throw new Error("请先加载jquery");var a=new Map,s=[],l=void 0,r={BEFORE_OPEN:"BEFORE_OPEN",BEFORE_CLOSE:"BEFORE_CLOSE",AFTER_OPEN:"AFTER_OPEN",AFTER_CLOSE:"AFTER_CLOSE"},c=t.parent||t,u=location.origin.indexOf("http")>-1?location.origin:"*",f=function(){function t(i,e){if(_classCallCheck(this,t),l instanceof t)return l;this.isOpen=!1,this.duration=e,this.container=n(i),this.initialize()}return _createClass(t,[{key:"initialize",value:function(){var t=this.$el=n('<div class="ibs-backdrop"></div>');this.container.append(t),t.on("click",function(){s.forEach(function(t){t.option.closeWhenClickBackdrop&&t.close()})})}},{key:"open",value:function(){this.$el.fadeIn(this.duration),this.isOpen=!0}},{key:"close",value:function(){s.filter(function(t){return t.isOpen}).length>1||(this.$el.fadeOut(this.duration),this.isOpen=!1)}}]),t}(),d=function(){function t(n,i){_classCallCheck(this,t),this.$el=n,this.option=i,this.$modalEl=this.$el.find(".ibs-full-modal"),this.$modalBody=this.$el.find(".ibs-modal-body"),this.isOpen=!1,this.isActivated=!1,this.backdrop=l=new f("body",i.duration+200),this.initialize()}return _createClass(t,[{key:"initialize",value:function(){var t=this;this.option.closeWhenClickBackdrop&&this.$el.on("click",function(){return t.onCloseButtonClick()}),this.$modalEl.on("click",function(t){return t.stopPropagation()}).on("click",".ibs-btn-close",function(){return t.onCloseButtonClick()}),this.$modalEl.css(o("transition","all "+this.option.duration+"ms"))}},{key:"open",value:function(){var t=this;this.option.beforeOpen.call(this,function(){c.postMessage(r.BEFORE_OPEN,u),t.activate(),t.backdrop.open(),t.$el.show(),t.$modalEl.animate({background:"#fff"},t.option.duration,function(){n("body").addClass("full-modal-open"),t.option.afterOpen.call(t),c.postMessage(r.AFTER_OPEN,u)}).css(o("transform","translateX(0)")).css({opacity:1}),t.isOpen=!0})}},{key:"scrollTop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.$modalBody.scrollTop(t)}},{key:"onCloseButtonClick",value:function(){this.option.beforeClose.call(this,this.close.bind(this))}},{key:"close",value:function(){var t=this;c.postMessage(r.BEFORE_CLOSE,u),this.backdrop.close(),this.$modalEl.animate({background:"transparent"},this.option.duration,function(){n("body").removeClass("full-modal-open"),t.option.afterClose.call(t),c.postMessage(r.AFTER_CLOSE,u),t.$el.hide(),t.deactivate()}).css(o("transform","translateX(30%)")).css({opacity:0}),this.isOpen=!1}},{key:"activate",value:function(){var t=this;s.forEach(function(n){n===t?(n.isActivated=!0,n.$el.css({zIndex:102})):(n.isActivated=!1,n.$el.css({zIndex:101}))})}},{key:"deactivate",value:function(){this.isActivated=!1,this.$el.css({zIndex:101})}}]),t}(),h=["open","close","scrollTop"],p={duration:300,trigger:"",closeWhenClickBackdrop:!0,beforeOpen:function(t){t()},beforeClose:function(t){t()},afterOpen:n.noop,afterClose:n.noop};n.fn.fullModal=function(t){for(var o=arguments.length,l=Array(o>1?o-1:0),r=1;r<o;r++)l[r-1]=arguments[r];return this.each(function(){var o=n(this);if(e(t)){var r=a.get(o.data("uniqueId")),c=t;return r?h.indexOf(c)<0?console.error('method:"'+c+'" is not allowed invoke on modal instance,expected method are ['+h.toString()+"]"):r[c].apply(r,l):console.error("please initialize modal first")}var u=n.extend(p,t),f=i(),v=new d(o,u);o.data("uniqueId",f),a.set(f,v),s.push(v),u.trigger&&n(u.trigger).on("click",function(){v.open()})})},n.fn.fullModal.Events=r,n.fn.fullModal.Defaults=p}(window,jQuery);
//# sourceMappingURL=jquery.plugin.full-modal.min.js.map
